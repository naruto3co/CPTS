# What Are We Looking For?
When conducting our external reconnaissance, there are several key items that we should be looking for. This information may not always be publicly accessible, but it would be prudent to see what is out there. If we get stuck during a penetration test, looking back at what could be obtained through passive recon can give us that nudge needed to move forward, such as password breach data that could be used to access a VPN or other externally facing service. The table below highlights the "What" in what we would be searching for during this phase of our engagement.

| Data Point          | Description |
|--------------------|-------------|
| **IP Space** | Xác định ASN hợp lệ của mục tiêu, các netblock đang sử dụng cho hạ tầng public-facing, cloud presence, nhà cung cấp hosting. Bao gồm DNS record liên quan đến IP, dải IP public, CDN, cloud provider (AWS, Azure, GCP…), v.v. |
| **Domain Information** | Dựa trên dữ liệu IP, DNS và đăng ký domain. Ai quản trị domain? Có subdomain nào liên quan đến mục tiêu không? Có các dịch vụ domain public nào đang mở không (Mail server, DNS, Website, VPN portal…)? Có thể xác định các biện pháp phòng thủ đang sử dụng không (SIEM, AV, IPS/IDS, WAF, v.v.)? |
| **Schema Format** | Có thể phát hiện được định dạng email, username AD, hoặc password policy của tổ chức không? Bất kỳ thông tin nào giúp xây dựng danh sách username hợp lệ để kiểm tra các dịch vụ public-facing bằng password spraying, credential stuffing, brute force, v.v. |
| **Data Disclosures** | Tìm các file public có thể truy cập được (.pdf, .ppt, .docx, .xlsx, v.v.) chứa thông tin hữu ích về mục tiêu. Ví dụ: danh sách intranet, metadata người dùng, file share, phần mềm/hardware nội bộ, credential bị lộ trên GitHub, định dạng username AD trong metadata PDF, v.v. |
| **Breach Data** | Dữ liệu rò rỉ công khai như username, password, hash, email hoặc thông tin nhạy cảm khác có thể giúp attacker chiếm quyền truy cập ban đầu (initial foothold). |
We have addressed the why and what of external reconnaissance; let's dive into the where and how.

# Where Are We Looking?
Our list of data points above can be gathered in many different ways. There are many different websites and tools that can provide us with some or all of the information above that we could use to obtain information vital to our assessment. The table below lists a few potential resources and examples that can be used.

| Resource | Examples |
|--------|----------|
| **ASN / IP Registrars** | IANA; ARIN (tra cứu IP/ASN khu vực châu Mỹ); RIPE (châu Âu); BGP Toolkit để phân tích ASN, routing, netblocks và mối quan hệ giữa các tổ chức. |
| **Domain Registrars & DNS** | DomainTools; PTRArchive; ICANN; thực hiện truy vấn DNS thủ công (A, AAAA, MX, NS, TXT, SOA) đối với domain mục tiêu hoặc qua các DNS server phổ biến như 8.8.8.8. |
| **Social Media** | Tìm kiếm trên LinkedIn, Twitter/X, Facebook, các mạng xã hội phổ biến theo khu vực, bài báo, thông cáo báo chí và bất kỳ thông tin công khai nào liên quan đến tổ chức. |
| **Public-Facing Company Websites** | Website công ty thường chứa thông tin giá trị: bài viết tin tức, tài liệu nhúng, trang *About Us*, *Contact Us*, thông tin nhân sự, công nghệ đang sử dụng, đối tác, v.v. |
| **Cloud & Dev Storage Spaces** | GitHub; AWS S3 buckets; Azure Blob Storage containers; Google searches sử dụng *Google Dorks* để tìm repo, backup, config file hoặc dữ liệu bị public nhầm. |
| **Breach Data Sources** | HaveIBeenPwned để kiểm tra email công ty có xuất hiện trong breach công khai không; Dehashed để tìm email công ty kèm password cleartext hoặc hash (có thể crack offline). Sau đó thử các credential này trên các cổng đăng nhập public (Citrix, RDS, OWA, O365, VPN, VMware Horizon, ứng dụng custom, v.v.) sử dụng AD authentication. |

## Finding Address Spaces
<img width="1010" height="477" alt="image" src="https://github.com/user-attachments/assets/94c5c457-7f40-421f-ad0d-913397867ab0" />
The BGP-Toolkit hosted by Hurricane Electric is a fantastic resource for researching what address blocks are assigned to an organization and what ASN they reside within. Just punch in a domain or IP address, and the toolkit will search for any results it can. We can glean a lot from this info. 

In some cases, your client may need to get written approval from a third-party hosting provider before you can test. Others, such as AWS, have specific guidelines for performing penetration tests and do not require prior approval for testing some of their services. Others, such as Oracle, ask you to submit a Cloud Security Testing Notification. These types of steps should be handled by your company management, legal team, contracts team, etc. If you are in doubt, escalate before attacking any external-facing services you are unsure of during an assessment. It is our responsibility to ensure that we have explicit permission to attack any hosts (both internal and external), and stopping and clarifying the scope in writing never hurts.

## DNS
DNS is a great way to validate our scope and find out about reachable hosts the customer did not disclose in their scoping document. Sites like domaintools, and viewdns.info are great spots to start. We can get back many records and other data ranging from DNS resolution to testing for DNSSEC and if the site is accessible in more restricted countries. Sometimes we may find additional hosts out of scope, but look interesting. In that case, we could bring this list to our client to see if any of them should indeed be included in the scope. We may also find interesting subdomains that were not listed in the scoping documents, but reside on in-scope IP addresses and therefore are fair game.

## Viewdns.info
<img width="1011" height="555" alt="image" src="https://github.com/user-attachments/assets/40e12c43-3750-4880-bf1e-7fe33791acad" />
This is also a great way to validate some of the data found from our IP/ASN searches. Not all information about the domain found will be current, and running checks that can validate what we see is always good practice.

# Public Data
Social media can be a treasure trove of interesting data that can clue us in to how the organization is structured, what kind of equipment they operate, potential software and security implementations, their schema, and more. On top of that list are job-related sites like LinkedIn, Indeed.com, and Glassdoor. Simple job postings often reveal a lot about a company. For example, take a look at the job listing below. It's for a SharePoint Administrator and can key us in on many things. We can tell from the listing that the company has been using SharePoint for a while and has a mature program since they are talking about security programs, backup & disaster recovery, and more. What is interesting to us in this posting is that we can see the company likely uses SharePoint 2013 and SharePoint 2016. That means they may have upgraded in place, potentially leaving vulnerabilities in play that may not exist in newer versions. This also means we may run into different versions of SharePoint during our engagements.

## Sharepoint Admin Job Listing
<img width="1012" height="383" alt="image" src="https://github.com/user-attachments/assets/ba64d516-dd43-462e-8509-07fee0739760" />
Don't discount public information such as job postings or social media. You can learn a lot about an organization just from what they post, and a well-intentioned post could disclose data relevant to us as penetration testers.

Websites hosted by the organization are also great places to dig for information. We can gather contact emails, phone numbers, organizational charts, published documents, etc. These sites, specifically the embedded documents, can often have links to internal infrastructure or intranet sites that you would not otherwise know about. Checking any publicly accessible information for those types of details can be quick wins when trying to formulate a picture of the domain structure. With the growing use of sites such as GitHub, AWS cloud storage, and other web-hosted platforms, data can also be leaked unintentionally. For example, a dev working on a project may accidentally leave some credentials or notes hardcoded into a code release. If you know where to look for that data, it can give you an easy win. It could mean the difference between having to password spray and brute-force credentials for hours or days or gaining a quick foothold with developer credentials, which may also have elevated permissions. Tools like Trufflehog and sites like Greyhat Warfare are fantastic resources for finding these breadcrumbs.

We have spent some time discussing external enumeration and recon of an organization, but this is just one piece of the puzzle. For a more detailed introduction to OSINT and external enumeration, check out the Footprinting and OSINT:Corporate Recon modules.
Up to this point, we have been mostly passive in our discussions. As you move forward into the pentest, you will become more hands-on, validating the information you have found and probing the domain for more information. Let's take a minute to discuss enumeration principles and how we can put a process in place to perform these actions.

## Overarching Enumeration Principles
Keeping in mind that our goal is to understand our target better, we are looking for every possible avenue we can find that will provide us with a potential route to the inside. Enumeration itself is an iterative process we will repeat several times throughout a penetration test. Besides the customer's scoping document, this is our primary source of information, so we want to ensure we are leaving no stone unturned. When starting our enumeration, we will first use passive resources, starting wide in scope and narrowing down. Once we exhaust our initial run of passive enumeration, we will need to examine the results and then move into our active enumeration phase.

## Example Enumeration Process
We have already covered quite a few concepts pertaining to enumeration. Let's start putting it all together. We will practice our enumeration tactics on the inlanefreight.com domain without performing any heavy scans (such as Nmap or vulnerability scans which are out of scope). We will start first by checking our Netblocks data and seeing what we can find.
