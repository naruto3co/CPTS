TÃ³m táº¯t â€“ Attacking Web Applications with Ffuf
  Má»¥c tiÃªu: há»c cÃ¡ch fuzzing (tÃ¬m kiáº¿m, brute-force) cÃ¡c thÃ nh pháº§n web á»©ng dá»¥ng báº±ng cÃ´ng cá»¥ ffuf.
  Ffuf lÃ  cÃ´ng cá»¥ phá»• biáº¿n, tin cáº­y Ä‘á»ƒ fuzzing web.
ğŸ”‘ CÃ¡c chá»§ Ä‘á» Ä‘Æ°á»£c Ä‘á» cáº­p:
  Directory fuzzing â€“ tÃ¬m thÆ° má»¥c áº©n.
  File & extension fuzzing â€“ tÃ¬m file vÃ  cÃ¡c pháº§n má»Ÿ rá»™ng.
  Hidden vhosts â€“ phÃ¡t hiá»‡n virtual host áº©n.
  PHP parameter fuzzing â€“ tÃ¬m tham sá»‘ PHP.
  Parameter value fuzzing â€“ thá»­ giÃ¡ trá»‹ cá»§a tham sá»‘.
ğŸ”‘ CÃ¡ch hoáº¡t Ä‘á»™ng cÆ¡ báº£n:
  DÃ¹ng wordlist gá»­i request Ä‘áº¿n webserver.
  Náº¿u server tráº£ vá» HTTP 200 (OK) â†’ trang/tham sá»‘ Ä‘Ã³ tá»“n táº¡i vÃ  cÃ³ thá»ƒ kiá»ƒm tra thá»§ cÃ´ng.






locate directory-list-2.3-small.txt

ffuf -w /opt/useful/seclists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ
ffuf -w /opt/useful/seclists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/blog/FUZZ.php

Náº¿u tÃ¬nh tháº¥y thÆ° má»¥c thÃ¬ Ä‘i tiáº¿p sÃ¢u bÃªn trong 1 cáº¥p, ngoÃ i thÆ° má»¥c thÃ¬ thá»­ thÃªm extension -e .php . cháº¿ Ä‘á»™ verbose -v chá»‰ in káº¿t quáº£ 
ffuf -w /opt/useful/seclists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php -v




| **Command**                                                                                                                                                     | **Description**                            |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ |
| `ffuf -h`                                                                                                                                                       | Hiá»ƒn thá»‹ help.                             |
| `ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ`                                                                                                       | Directory fuzzing (tÃ¬m thÆ° má»¥c).           |
| `ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/indexFUZZ`                                                                                                  | Extension fuzzing (tÃ¬m pháº§n má»Ÿ rá»™ng file). |
| `ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/blog/FUZZ.php`                                                                                              | Page fuzzing (tÃ¬m file cá»¥ thá»ƒ).            |
| `ffuf -w wordlist.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php -v`                                                              | Recursive fuzzing (láº·p sÃ¢u thÆ° má»¥c).       |
| `ffuf -w wordlist.txt:FUZZ -u https://FUZZ.hackthebox.eu/`                                                                                                      | Sub-domain fuzzing.                        |
| `ffuf -w wordlist.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb' -fs xxx`                                                                     | VHost fuzzing (Host header injection).     |
| `ffuf -w wordlist.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php?FUZZ=key -fs xxx`                                                                   | Parameter fuzzing â€“ GET.                   |
| `ffuf -w wordlist.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'FUZZ=key' -H 'Content-Type: application/x-www-form-urlencoded' -fs xxx` | Parameter fuzzing â€“ POST.                  |
| `ffuf -w ids.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'id=FUZZ' -H 'Content-Type: application/x-www-form-urlencoded' -fs xxx`       | Value fuzzing (fuzz giÃ¡ trá»‹ parameter).    |
| `/opt/useful/seclists/Discovery/Web-Content/directory-list-2.3-small.txt`                                                                                       | Wordlist thÆ° má»¥c/trang.                    |
| `/opt/useful/seclists/Discovery/Web-Content/web-extensions.txt`                                                                                                 | Wordlist extension file.                   |
| `/opt/useful/seclists/Discovery/DNS/subdomains-top1million-5000.txt`                                                                                            | Wordlist sub-domain.                       |
| `/opt/useful/seclists/Discovery/Web-Content/burp-parameter-names.txt`                                                                                           | Wordlist parameter.                        |
| `sudo sh -c 'echo "SERVER_IP academy.htb" >> /etc/hosts'`                                                                                                       | ThÃªm DNS entry vÃ o `/etc/hosts`.           |
| `for i in $(seq 1 1000); do echo $i >> ids.txt; done`                                                                                                           | Táº¡o wordlist sá»‘ (1â€“1000).                  |
| `curl http://admin.academy.htb:PORT/admin/admin.php -X POST -d 'id=key' -H 'Content-Type: application/x-www-form-urlencoded'`                                   | Gá»­i POST request thá»§ cÃ´ng vá»›i curl.        |



TÃ¬m subdomain 
ffuf -w /opt/useful/seclists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://FUZZ.academy.htb/


TÃ¬m VHOST 

Bá»‘i cáº£nh
  Báº¡n tÃ¬m tháº¥y má»™t server cÃ³ IP: 10.10.10.10
  Khi truy cáº­p http://10.10.10.10 trÃªn trÃ¬nh duyá»‡t â†’ chá»‰ tháº¥y trang máº·c Ä‘á»‹nh (nghÃ¨o nÃ n, khÃ´ng há»¯u Ã­ch).
  Báº¡n nghi ngá» server nÃ y cÃ³ nhiá»u VHost áº©n.

Cháº¡y lá»‡nh fuzzing
  ffuf -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://10.10.10.10/ -H "Host: FUZZ.10.10.10.10"
Hoáº·c náº¿u biáº¿t domain chÃ­nh lÃ  example.com:
  ffuf -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://10.10.10.10/ -H "Host: FUZZ.example.com"



ğŸ” Quy trÃ¬nh tÃ¬m vÃ  truy cáº­p VHost áº©n
XÃ¡c Ä‘á»‹nh IP server
  Tá»« DNS public cá»§a domain chÃ­nh (academy.htb â†’ 10.10.10.10)
  Hoáº·c tá»« scan (nmap, dig, ping, recon khÃ¡c).
ğŸ‘‰ ÄÃ¢y lÃ  IP duy nháº¥t server Ä‘ang cháº¡y.
Fuzz VHost trÃªn IP Ä‘Ã³
  DÃ¹ng ffuf vá»›i -H "Host: FUZZ.academy.htb" gá»­i request Ä‘áº¿n http://10.10.10.10/.
  Náº¿u header Host khá»›p vá»›i VHost tá»“n táº¡i â†’ server tráº£ vá» ná»™i dung khÃ¡c biá»‡t.
PhÃ¡t hiá»‡n domain áº©n
  VÃ­ dá»¥ tÃ¬m tháº¥y admin.academy.htb
ThÃªm domain vÃ o /etc/hosts
  Bá»Ÿi vÃ¬ DNS public khÃ´ng biáº¿t admin.academy.htb lÃ  gÃ¬.
  Ta buá»™c pháº£i map thá»§ cÃ´ng:
    10.10.10.10  admin.academy.htb
Truy cáº­p trá»±c tiáº¿p
  Giá» chá»‰ cáº§n gÃµ http://admin.academy.htb trÃªn trÃ¬nh duyá»‡t â†’ request sáº½ Ä‘i tá»›i IP 10.10.10.10, vá»›i Host header Ä‘Ãºng â†’ server tráº£ vá» site admin.
ğŸ‘‰ TÃ³m láº¡i: Äáº§u tiÃªn pháº£i biáº¿t IP â†’ fuzz VHost trÃªn IP Ä‘Ã³ â†’ phÃ¡t hiá»‡n domain áº©n â†’ thÃªm vÃ o /etc/hosts â†’ truy cáº­p Ä‘Æ°á»£c.

Cáº¥u hÃ¬nh /etc/hosts vá»›i IP vÃ  domain

Giáº£ sá»­ IP cá»§a server lÃ  10.10.10.10, báº¡n sáº½ thÃªm:
  10.10.10.10   example.com
  10.10.10.10   www.example.com
  10.10.10.10   admin.example.com
  10.10.10.10   intranet.example.com




Filtering Results
Filter size lÃ  900
  naruto3co@htb[/htb]$ ffuf -w /opt/useful/seclists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb' -fs 900




